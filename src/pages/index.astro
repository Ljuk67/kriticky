---
import BaseHead from '../components/BaseHead.astro';
import Footer from '../components/Footer.astro';
import Header from '../components/Header.astro';
import PostsGrid from '../components/PostsGrid.astro';
import { getCollection } from 'astro:content';
import { SITE_DESCRIPTION, SITE_TITLE } from '../consts';
import { tagToSlug } from '../lib/slug';
import heroTiles from '../assets/patterns/hero-tiles.svg?url';
import Info from '../components/icons/Info.astro';

// Thumbnails with runtime-safe lazy imports (avoid missing-file crashes in dev)
const thumbs = import.meta.glob('../assets/thumbs/*.svg', { query: '?url', import: 'default' });
async function getThumb(id: string) {
  const key = `../assets/thumbs/${id}.svg`;
  const def = `../assets/thumbs/default.svg`;
  const loader = (thumbs as Record<string, () => Promise<string>>)[key] || (thumbs as Record<string, () => Promise<string>>)[def];
  return await loader();
}

const allPosts = await getCollection('blog');
// Respect draft visibility: in production show only published posts; in dev show all
const posts = allPosts.filter((p) => (import.meta.env.PROD ? p.data.status === 'published' : true));
const latestPosts = posts
    .sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf())
    .slice(0, 8);
const latestWithThumbs = await Promise.all(latestPosts.map(async (p) => ({ ...p, thumb: await getThumb(p.id) })));

// Compute tag cloud data
const tagCounts = new Map<string, number>();
for (const p of posts) {
  const tags = Array.isArray(p.data.tags) ? p.data.tags : [];
  for (const t of tags) tagCounts.set(t, (tagCounts.get(t) ?? 0) + 1);
}
const tags = [...tagCounts.entries()].sort((a, b) => a[0].localeCompare(b[0], 'sk'));
const allTags = [...tagCounts.entries()].sort((a, b) => a[0].localeCompare(b[0], 'sk'));
const counts = tags.map(([, c]) => c);
const minCount = counts.length ? Math.min(...counts) : 0;
const maxCount = counts.length ? Math.max(...counts) : 0;
const scale = (c: number) => {
  if (minCount === maxCount) return 1.0;
  const t = (c - minCount) / (maxCount - minCount);
  return 0.9 + t * 0.6; // 0.9em .. 1.5em
};

// Compute categories with at least one post
const catCounts = new Map<string, number>();
for (const p of posts) {
  const cats = Array.isArray(p.data.categories) ? p.data.categories : [];
  for (const c of cats) catCounts.set(c, (catCounts.get(c) ?? 0) + 1);
}
const allCategories = [...catCounts.entries()].sort((a, b) => a[0].localeCompare(b[0], 'sk'));
---

<!doctype html>
<html lang="sk">
	<head>
		<!--	page title = seo title: <BaseHead title={SITE_TITLE} description={SITE_DESCRIPTION} />  -->
		<BaseHead title="Kritick√© myslenie v praxi: nestra≈• sa v z√°plave inform√°ci√≠" description="Kriticky.sk ti pom√¥≈æe rozumie≈• svetu okolo seba a nauƒçi≈• sa rozli≈°ova≈• fakty od domnienok, em√≥cie od reality" />
			<style>
				.hero h1 { font-size: clamp(2.5rem, 4vw, 4rem); }
				.hero p.lead { font-size: clamp(1.1rem, 2vw, 1.35rem); }
				/* Prevent horizontal overflow on narrow screens */
				.stop-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(min(100%, 360px), 1fr)); gap: 1rem; margin-top: 1.5rem; }
				.stop-card { text-align: center; }
				.latest-posts { margin-top: 3rem; }
				.posts { display: grid; grid-template-columns: repeat(auto-fit, minmax(min(100%, 360px), 1fr)); gap: 1rem; list-style: none; padding: 0; margin: 0; }
				.posts li a { display: block; text-decoration: none; }
				.posts li img, .posts li svg { display: block; width: 100%; height: auto; margin-bottom: 14px; border-radius: 12px; }
				.posts li .title { margin: 0; color: rgb(var(--black)); }
				.posts li .date { margin: 0; color: rgb(var(--gray)); }
				/* On hover, only adjust date; keep title color unchanged */
				.posts li:hover .date { color: rgb(var(--accent)); }
				.posts li:hover img, .posts li:hover svg { box-shadow: var(--box-shadow); }
				
				.lead{font-size: 1.5em; font-weight:200;}

				/* Fix: keep background fixed but only within herobcg; do not overlay page */
				.herobcg::before { content: none !important; }
				.herobcg {
					background-image: linear-gradient(rgba(255,255,255,0.8), rgba(255,255,255,0.8)), url("data:image/svg+xml,%3c?xml%20version=%271.0%27%20encoding=%27UTF-8%27?%3e%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20viewBox=%270%200%20720%20360%27%20role=%27img%27%20aria-label=%27Abstraktn%C3%BD%20geometrick%C3%BD%20n%C3%A1h%C4%BEad%27%3e%3cdefs%3e%3clinearGradient%20id=%27bg-grad%27%20x1=%270%27%20y1=%270%27%20x2=%27720%27%20y2=%270%27%20gradientUnits=%27userSpaceOnUse%27%20gradientTransform=%27rotate(92,%20360,%20180)%27%3e%3cstop%20offset=%270%25%27%20stop-color=%27%239bb5c0%27%20/%3e%3cstop%20offset=%27100%25%27%20stop-color=%27%239ac2ab%27%20/%3e%3c/linearGradient%3e%3cclipPath%20id=%27rounded%27%3e%3crect%20x=%270%27%20y=%270%27%20width=%27720%27%20height=%27360%27%20rx=%2721.599999999999998%27%20ry=%2721.599999999999998%27%20/%3e%3c/clipPath%3e%3c/defs%3e%3cg%20clip-path=%27url(%23rounded)%27%3e%3crect%20x=%270%27%20y=%270%27%20width=%27720%27%20height=%27360%27%20fill=%27url(%23bg-grad)%27%20/%3e%3cg%20transform=%27translate(223.54144239798188%20262.7468216121197)%20rotate(304)%27%3e%3crect%20x=%27-183.71791180458217%27%20y=%27-211.62879339362425%27%20width=%27367.43582360916434%27%20height=%27423.2575867872485%27%20fill=%27%23EDDD53%27%20opacity=%270.51%27/%3e%3c/g%3e%3cpolygon%20points=%27515.5430828422279,336.6444123603214%20472.6337369095445,286.39091282619006%20463.875157964918,218.56183731809685%20523.0342791343654,172.6903722506763%20575.5198872598369,217.14531317301157%20625.3014814583042,264.2873144411222%20579.3482938131247,317.94595368926525%27%20fill=%27%232A7B9B%27%20opacity=%270.39%27%20/%3e%3cpolygon%20points=%27459.8077957642742,-15.748203315083266%20551.6540883560585,-24.96296283051111%20619.6536404077073,46.046042466826236%20584.4164046893937,149.19305720964607%20484.0089848086959,134.94217882963855%20433.2439798999395,69.1656425954389%27%20fill=%27none%27%20stroke=%27%2357C785%27%20stroke-width=%273.28432125762105%27%20stroke-linejoin=%27round%27%20opacity=%270.52%27%20/%3e%3ccircle%20cx=%27195.17661060020325%27%20cy=%2759.32126541063189%27%20r=%2769.29297211091715%27%20fill=%27hsl(0%200%25%2085%25)%27%20opacity=%270.59%27%20/%3e%3c/g%3e%3c/svg%3e");
					background-repeat: no-repeat;
					background-repeat: no-repeat, repeat;
					background-size: auto, cover;
					background-attachment: scroll, fixed;
				}
			</style>
	</head>
	<body>
		<Header />
		<main class="mx-auto mt-0 pt-0 max-w-4xl px-4 sm:px-6 lg:px-8">
		<section class="herobcg full-bleed pt-8 pb-[2.5em] mt-0 min-h-[800px] mb-24" style="box-shadow:inset 0px -20px 20px #0000000d;" style={`--hero-bg: url(${heroTiles});`}>
			<div class="mx-auto max-w-4xl px-4 sm:px-6 lg:px-8">
			<section class="hero text-center">
				<h1 class="mx-auto my-20 text-3xl !leading-tight sm:text-4xl md:text-5xl"><span class="font-light">Spomaƒæ. Mysli. Overuj.</span> <br/>Kritick√© myslenie v be≈ænom ≈æivote.</h1>
			</section>
			<section>
				
				<p class="text-2xl font-light headingfont">Svet je preplnen√Ω inform√°ciami. <b>Ale inform√°cie sa nemusia rovna≈• pravde.</b> Ka≈æd√Ω m√° ‚Äûsvoju pravdu‚Äú, nieƒço zdieƒæa, nieƒço komentuje, nieƒçomu ver√≠. 
					A je √∫plne norm√°lne, ak sa v tom ƒçlovek obƒças strat√≠.</p>
				<p class="text-2xl font-light headingfont"><strong>Kriticky.sk</strong> je miesto pre ka≈æd√©ho, kto si kladie ot√°zky. Kto je <em>zdravo</em> skeptick√Ω.
					Kto nechce hneƒè uveri≈• v≈°etk√©mu, ale ani hneƒè v≈°etko odmieta≈•. Kto chce rozumie≈• svetu okolo seba ‚Äì a nauƒçi≈• sa rozli≈°ova≈• fakty od domnienok, em√≥cie od reality.</p>
			</section>
			</div>
		</section>

			<section class="full-bleed">
				<div class="mx-1 md:mx-8 grid gap-6 md:gap-8 grid-cols-1 md:grid-cols-2 lg:grid-cols-4">
				<div class="stop-card -top-36 relative fancybox ">
					<span class="text-7xl font-bold">S</span><h3>S<span class="font-light">kontroluj zdroj</span></h3>
					<p class="text-base">Kto to tvrd√≠? Je to <a href="/blog/ako-odlisit-spolahlive-zdroje-od-nespolahlivych/">d√¥veryhodn√Ω zdroj</a>? M√° meno, odborn√∫ autoritu, minulos≈• v klamstv√°ch?</p>
				</div>
				<div class="stop-card -top-36 relative fancybox">
					<span class="text-7xl font-bold">T</span><h3>T<span class="font-light">riezvo prem√Ω≈°ƒæaj</span></h3>
					<p class="text-base">Nehr√° to na tvoje em√≥cie? Znie to pr√≠li≈° dobre/zle na to, aby to bola pravda?</p>
				</div>
				<div class="stop-card -top-36 relative  fancybox">
					<span class="text-7xl font-bold">O</span><h3>O<span class="font-light">ver fakty</span></h3>
					<p class="text-base">Daj√∫ sa tvrdenia potvrdi≈• z viacer√Ωch nez√°visl√Ωch zdrojov? Je k tomu d√¥kaz, ≈°t√∫dia, re√°lne ƒç√≠sla? Alebo je to len nieƒç√≠ n√°zor?</p>
				</div>
				<div class="stop-card -top-36 relative  fancybox">
					<span class="text-7xl font-bold">P</span><h3>P<span class="font-light">ozor na zaujatos≈•</span></h3>
					<p class="text-base"><u>Vlastn√° zaujatos≈•:</u> nehƒæad√°≈° len to, ƒço potvrdzuje tvoje n√°zory? Neodmieta≈° nieƒço len preto, ≈æe s t√Ωm nes√∫hlas√≠≈°?
						<u>Autorova zaujatos≈•:</u> ƒço je motiv√°ciou autora? ƒåo chce naozaj dosiahnu≈•?
					</p>
				</div>
				
				</div>
				<div 
				class="bg-black p-8 md:px-10 md:py-10 -mt-24 mb-24 mx-auto max-w-5xl rounded-lg flex flex-col items-center text-center">
				<h5 class="text-white text-4xl md:text-6xl tracking-tight">
					Kto mysl√≠, ten STOP-ne.
				</h5>
				</div>
			</section>

				
			
			
			<blockquote>
				<p>‚ÄûM√∫dry ƒçlovek porovn√°va svoje tvrdenia s d√¥kazmi.‚Äú</p>
				<footer><cite>David Hume</cite></footer>
			  </blockquote>
			  <p class="text-2xl">In√Ωmi slovami: Ma≈• n√°zor je d√¥le≈æit√©. E≈°te d√¥le≈æitej≈°ie ale je vedie≈• tento n√°zor prehodnoti≈• a zmeni≈•, ak k tomu smeruj√∫ fakty.</p>
			  

			  <section class="fancybox herobcg md:text-2xl !p-4 md:p-6 mt-24">


				<h3><Info class="w-12 h-12 text-green-900 -mb-[10px]" /> Si tu prv√Ω kr√°t? Zaƒçni tu:</h3>
				<p>Odpor√∫ƒçan√© ƒç√≠tanie predt√Ωm, ne≈æ sa ponor√≠≈° do ƒçl√°nkov:</p>
				<ol>
					<li><a href="/blog/zaklady-kritickeho-myslenia/">Preƒç√≠taj si z√°klady kritick√©ho myslenia</a></li>
					<li><a href="/blog/zakladne-typy-zaujatosti/">Zisti, ak√© z√°kladn√© typy zaujatost√≠ n√°s be≈æne ovplyv≈àuj√∫</a></li>
					<li><a href="/blog/ako-odlisit-spolahlive-zdroje-od-nespolahlivych/">Over si, ƒçi vie≈° odl√≠≈°i≈• spoƒæahliv√© zdroje inform√°ci√≠ od nespoƒæahliv√Ωch</a></li>
				</ol>
			
				<p>Tieto ƒçl√°nky ti daj√∫ dobr√Ω z√°klad kritick√©ho myslenia. Potom sa m√¥≈æe≈° vrhn√∫≈• na v≈°etky ƒçl√°nky v <a href="/blog/">blogu</a>.</p>
			</section>

			  <section class="latest-posts full-bleed mt-12">
				<div class="mx-0 md:mx-8">
				<h2>Najnov≈°ie ƒçl√°nky</h2>
				{allCategories.length > 0 && (
					<div class="mt-2 mb-4">
						<ul class="flex flex-wrap gap-2 p-0 m-0 list-none" aria-label="Kateg√≥rie">
							{allCategories.map(([c, count]) => (
								<li>
									<a class="inline-block bg-gray-200 text-gray-800 rounded-full px-2 py-0.5 no-underline mr-1" href={`/categories/${tagToSlug(c)}/`}>{c} <span class="text-gray-500 ml-1 text-sm">({count})</span></a>
								</li>
							))}
						</ul>
					</div>
				)}
				<PostsGrid items={latestWithThumbs.map((post) => ({
				  url: `${import.meta.env.BASE_URL}blog/${post.id}/`,
				  title: post.data.title,
				  date: post.data.pubDate,
				  thumbUrl: post.thumb,
				}))} titleClass="text-[1.5em]" />
				<p class="view-all"><a href={`${import.meta.env.BASE_URL}blog/`}>Zobrazi≈• v≈°etky ƒçl√°nky ‚Üí</a></p>
				
				</div>
			</section>

			{tags.length > 0 && (


			<section class="tag-cloud full-bleed mt-2 pt-4 border-t border-gray-200">
			  <div class="mx-0 md:mx-8">
			  <h3>Podƒæa t√©m</h3>
			  <ul class="flex flex-wrap gap-2 sm:gap-3 md:gap-6 items-baseline p-0 m-0 list-none">
				{allTags.map(([t, c]) => (
				  <li>
					<a class="inline-block bg-gray-200 text-gray-800 rounded-full px-3 py-1 no-underline hover:bg-gray-300" href={`/tags/${tagToSlug(t)}/`}>{t} <span class="text-gray-500 ml-1 text-sm">({c})</span></a>
				  </li>
				))}
			  </ul>
			  </div>
			</section>
			)}



				<div class="mb-12 bg-black p-8 md:px-20 md:py-20 mt-20 mx-auto max-w-5xl rounded-lg flex flex-col items-center text-center">
				<h2 class="text-white text-4xl md:text-6xl tracking-tight">
				ƒåo mysl√≠me pod kritick√Ωm myslen√≠m?
				</h2>
				<p class="text-slate-400 mt-4 text-lg md:text-xl">
				Kritick√© myslenie nie je o tom by≈• "m√∫drej≈°√≠" ne≈æ ostatn√≠.<br/>Je to zruƒçnos≈•, ktor√∫ si m√¥≈æe rozv√≠ja≈• ka≈æd√Ω ‚Äì ƒçi m√° 16 alebo 60.
				<br/>Ide len o to, <strong>spomali≈•, pozrie≈• sa na veci s odstupom a polo≈æi≈• si zop√°r ot√°zok</strong>.
				</p>
				<div class="flex mt-5">
				<a class="btn btn-light" href="/blog/zaklady-kritickeho-myslenia/">Viac o kritickom myslen√≠</a>
				</div>
				</div>

				<h2>ƒåo tu n√°jde≈°?</h2>
				<p>üß© <strong>Pr√≠klady z praxe</strong><br/>Re√°lne pr√≠klady z m√©di√≠, soci√°lnych siet√≠, politiky ‚Äì rozobran√© jednoducho, bez pouƒçovania.</p>
				<p>üîç <strong>N√°vody a techniky</strong><br/>Ako si overi≈• inform√°cie, ako spozna≈• zav√°dzanie, ako si da≈• pozor na vlastn√© chyby v uva≈æovan√≠.</p>
				<p>üß† <strong>Zauj√≠mavosti o ƒæudskej mysli</strong><br/>Preƒço n√°s l√°kaj√∫ jednoduch√© rie≈°enia? Preƒço si niektor√© n√°zory chr√°nime ako keby boli na≈°e deti? (A ƒço s t√Ωm?)</p>
				

				<h2 class="mt-12">Preƒço?</h2>
				<p>Lebo ver√≠m, ≈æe <strong>kritick√© myslenie patr√≠ do ka≈ædodenn√©ho ≈æivota</strong>.<br/>
				Nie ako ≈°kolsk√° pouƒçka, ale ako u≈æitoƒçn√Ω kompas pre dobu, kde sa inform√°cie ≈°√≠ria r√Ωchlej≈°ie ne≈æ rozum.</p>
				<p>Nechcem ti hovori≈•, ƒço si m√°≈° myslie≈•. <a href="/about" target="_blank">Viac o tomto projekte a o mne tu</a>.<br/>
				Chcem ti pom√¥c≈• <strong>rozpozna≈•, kedy sa oplat√≠ myslie≈• viac.</strong></p>
				<p>Vitaj.</p>
				<p>A hlavne ‚Äì<br/>
					<strong>Spomaƒæ. Mysli. Overuj.</strong></p>


			
		</main>

			
		<Footer />
	</body>
</html>
