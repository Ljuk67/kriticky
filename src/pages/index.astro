---
import BaseHead from '../components/BaseHead.astro';
import Footer from '../components/Footer.astro';
import Header from '../components/Header.astro';
import FormattedDate from '../components/FormattedDate.astro';
import { getCollection } from 'astro:content';
import { SITE_DESCRIPTION, SITE_TITLE } from '../consts';
import { tagToSlug } from '../lib/slug';
// Map of generated SVG thumbs (url strings)
const thumbs = import.meta.glob('../assets/thumbs/*.svg', { eager: true, query: '?url', import: 'default' });
const getThumb = (id) => thumbs[`../assets/thumbs/${id}.svg`];

const allPosts = await getCollection('blog');
const latestPosts = allPosts
    .sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf())
    .slice(0, 6);

// Compute tag cloud data
const tagCounts = new Map<string, number>();
for (const p of allPosts) {
  const tags = Array.isArray(p.data.tags) ? p.data.tags : [];
  for (const t of tags) tagCounts.set(t, (tagCounts.get(t) ?? 0) + 1);
}
const tags = [...tagCounts.entries()].sort((a, b) => a[0].localeCompare(b[0], 'sk'));
const allTags = [...tagCounts.entries()].sort((a, b) => a[0].localeCompare(b[0], 'sk'));
const counts = tags.map(([, c]) => c);
const minCount = counts.length ? Math.min(...counts) : 0;
const maxCount = counts.length ? Math.max(...counts) : 0;
const scale = (c: number) => {
  if (minCount === maxCount) return 1.0;
  const t = (c - minCount) / (maxCount - minCount);
  return 0.9 + t * 0.6; // 0.9em .. 1.5em
};
---

<!doctype html>
<html lang="sk">
	<head>
		<BaseHead title={SITE_TITLE} description={SITE_DESCRIPTION} />
			<style>
				/* Glass + grid */
				.hero { grid-column: content; padding: 2rem; text-align: center; }
				.hero h1 { font-size: clamp(2rem, 4vw, 3rem); margin: 0 0 0.5rem 0; }
				.hero p.lead { font-size: clamp(1.1rem, 2vw, 1.35rem); margin: 0.5rem 0 0; }
				.stop-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(360px, 1fr)); gap: 1rem; margin-top: 1.5rem; }
				.stop-card { padding: 2rem; text-align: center; }
				.stop-card h3 { margin: 0 0 0.25rem 0; }
				.stop-card p { margin: 0.25rem 0; }
				.latest-posts { margin-top: 3rem; }
				.posts { display: grid; grid-template-columns: repeat(auto-fit, minmax(360px, 1fr)); gap: 1rem; list-style: none; padding: 0; margin: 0; }
				.posts li a { display: block; text-decoration: none; }
				.posts li img, .posts li svg { display: block; width: 100%; height: auto; margin-bottom: 14px; border-radius: 12px; }
				.posts li .title { margin: 0; color: rgb(var(--black)); }
				.posts li .date { margin: 0; color: rgb(var(--gray)); }
				.posts li:hover .title, .posts li:hover .date { color: rgb(var(--accent)); }
				.posts li:hover img, .posts li:hover svg { box-shadow: var(--box-shadow); }
				.tag-cloud { grid-column: content; margin-top: 3rem; padding-top: 1rem; border-top: 1px solid rgb(var(--gray-light)); }
				.tag-cloud .tags { list-style: none; padding: 0; margin: 0.5rem 0 0 0; display: flex; flex-wrap: wrap; gap: 22px; align-items: baseline; }
				.tag-cloud a { text-decoration: none; background: none; color: rgb(var(--black)); padding: 0; transition: color 0.2s ease; }
				.tag-cloud a:hover { color: var(--accent); text-decoration: underline; }
				.lead{font-size: 1.5em; font-weight:200;}
			</style>
	</head>
	<body>
		<Header />
		<main class="content-grid" style="background: #f2f2f2;">
			<section class="hero">
				
				<h1 style="font-size:2em;  margin: 0px auto;">Spomaľ. Mysli. Overuj. <br/>Kritické myslenie v bežnom živote.</h1>
			</section>

			<section class="stop-grid breakout-90">
				<div class="stop-card glass">
					<h3>S – Skontroluj zdroj</h3>
					<p>– Kto to tvrdí? Je to dôveryhodný zdroj? Má meno, odbornú autoritu, minulosť v klamstvách?</p>
				</div>
				<div class="stop-card glass">
					<h3>T – Triezvo premýšľaj</h3>
					<p>– Nehrá to na tvoje emócie? Znie to príliš dobre/zle na to, aby to bola pravda?</p>
				</div>
				<div class="stop-card glass">
					<h3>O – Over fakty</h3>
					<p>– Dajú sa tvrdenia potvrdiť z viacerých nezávislých zdrojov? Je k tomu dôkaz, štúdia, reálne čísla?</p>
				</div>
				<div class="stop-card glass">
					<h3>P – Pozor na vlastnú zaujatosť (bias)</h3>
					<p>– Nehľadáš len to, čo potvrdzuje tvoje názory? Neodmietaš niečo len preto, že s tým nesúhlasíš?</p>
				</div>
				
			</section>
			<span class="lead" style="text-align: center; color:var(--accent);margin: 35px 5px;" >Kto myslí, ten STOPne.</span>
			<!-- Introductory content -->
			<section style="grid-column: content; padding: 1.5rem; margin-top: 1.5rem; ">
				
				<p>Na internete je dnes ťažké vyznať sa. Každý má „svoju pravdu“, niečo zdieľa, niečo komentuje, niečomu verí. A je úplne normálne, ak sa v tom človek občas stratí. Aj my sme verili veciam, ktoré neboli úplne pravdivé – a možno stále niektorým veríme.</p>
				<p>Preto vznikol tento web. <strong>Kriticky.sk</strong> je miesto pre každého, kto si kladie otázky. Kto nechce hneď uveriť všetkému, ale ani hneď všetko odmietať. Kto chce rozumieť svetu okolo seba – a naučiť sa rozlišovať fakty od domnienok, emócie od reality.</p>
			</section>

			<section class="glass" style="grid-column: content; padding: 1.5rem; margin-top: 1rem;">
				<h2>🧭 Čo je to kritické myslenie?</h2>
				<p>Kritické myslenie nie je o tom byť "múdrejší" než ostatní.<br/>Je to zručnosť, ktorú si môže rozvíjať každý – či má 16 alebo 60.<br/>Ide len o to, <strong>spomaliť, pozrieť sa na veci s odstupom a položiť si zopár otázok</strong>.</p>
			</section>

			<section class="glass" style="grid-column: content; padding: 1.5rem; margin-top: 1rem;">
				<h2>🛑 Metóda STOP</h2>
				<p>Jednoduchý nástroj, ktorý ti pomôže, keď niečo znie až príliš dobre (alebo zle) na to, aby to bola pravda:</p>
				<p><strong>S</strong> – <strong>Skontroluj zdroj</strong><br/>
				<strong>T</strong> – <strong>Triezvo premýšľaj</strong><br/>
				<strong>O</strong> – <strong>Over fakty</strong><br/>
				<strong>P</strong> – <strong>Pozor na vlastnú zaujatost</strong></p>

				<p>Týchto 4 krokov ti môže ušetriť nielen trapas na Facebooku, ale aj názor, ktorého by si mohol časom ľutovať.</p>
			</section>

			<section class="glass" style="grid-column: content; padding: 1.5rem; margin-top: 1rem;">
				<h2>🔎 Čo tu nájdeš?</h2>
				<p>🧩 <strong>Príklady z praxe</strong><br/>Reálne príklady z médií, sociálnych sietí, politiky – rozobrané jednoducho, bez poučovania.</p>
				<p>🔍 <strong>Návody a techniky</strong><br/>Ako si overiť informácie, ako spoznať zavádzanie, ako si dať pozor na vlastné chyby v uvažovaní.</p>
				<p>🧠 <strong>Zaujímavosti o ľudskej mysli</strong><br/>Prečo nás lákajú jednoduché riešenia? Prečo si niektoré názory chránime ako keby boli naše deti? (A čo s tým?)</p>
			</section>

			<section class="glass" style="grid-column: content; padding: 1.5rem; margin-top: 1rem;">
				<h2>🫱 Pre koho to je?</h2>
				<p>Pre všetkých, ktorí si niekedy povedali:<br/>
				<strong>„Toto mi nesedí… ale neviem prečo.“</strong><br/>
				alebo<br/>
				<strong>„Niečo mi tu nesedí… ale ostatní to zdieľajú, tak asi OK?“</strong></p>
				<p>Ak chceš rozumieť svetu, ale nechceš byť manipulovaný – si tu správne.<br/>
				Ak si myslíš, že nikto nemá vždy pravdu – vitaj.<br/>
				Ak si zvedavý, ale opatrný – poď ďalej.</p>
			</section>

			<section class="glass" style="grid-column: content; padding: 1.5rem; margin-top: 1rem;">
				<h2>✨ Prečo to robíme?</h2>
				<p>Lebo veríme, že <strong>kritické myslenie patrí do každodenného života</strong>.<br/>
				Nie ako školská poučka, ale ako užitočný kompas pre dobu, kde sa informácie šíria rýchlejšie než rozum.</p>
				<p>Nechceme ti hovoriť, čo si máš myslieť.<br/>
				Chceme ti pomôcť <strong>rozpoznať, kedy sa oplatí myslieť viac.</strong></p>
				<p>Vitaj.</p>
				<p>A hlavne –<br/>
					<strong>Spomaľ. Mysli. Overuj.</strong></p>
			</section>


			<section class="latest-posts breakout-90">
				<h2>Najnovšie články</h2>
				<ul class="posts">
					{
						latestPosts.map((post) => (
							<li class="glass" style="padding: 0.75rem; border-radius: 14px;">
								<a href={`${import.meta.env.BASE_URL}blog/${post.id}/`}>
									<img src={getThumb(post.id)} alt="" />
									<h4 class="title">{post.data.title}</h4>
									<p class="date">
										<FormattedDate date={post.data.pubDate} />
									</p>
								</a>
							</li>
						))
					}
				</ul>
				<p class="view-all"><a href={`${import.meta.env.BASE_URL}blog/`}>Zobraziť všetky články →</a></p>
			</section>
			<hr/>
			{tags.length > 0 && (

			<style>
			  ul.tags { list-style: none; padding: 0; margin: 0; display: flex; flex-wrap: wrap; gap: 10px; }
			  a.tag { display: inline-block; background: rgb(var(--gray-light)); color: rgb(var(--gray-dark)); border-radius: 999px; padding: 6px 12px; text-decoration: none; }
			  a.tag:hover { background: rgba(var(--gray), 0.25); }
			  .count { color: rgb(var(--gray)); margin-left: 6px; font-size: 0.9em; }
			</style>

			<section class="tag-cloud">
			  <h3>Značky</h3>
			  <ul class="tags">
				{allTags.map(([t, c]) => (
				  <li>
					<a class="tag" href={`/tags/${tagToSlug(t)}/`}>{t} <span class="count">({c})</span></a>
				  </li>
				))}
			  </ul>
			</section>
			)}

		</main>

			
		<Footer />
	</body>
</html>
